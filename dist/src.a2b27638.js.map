{"version":3,"sources":["src/canvas.js","src/lib.js","src/index.js","node_modules/parcel-bundler/src/builtins/bundle-url.js","node_modules/parcel-bundler/src/builtins/css-loader.js"],"names":["svgns","DAG","_classCallCheck","_createClass","key","value","createStage","id","stage","Stage","getStage","runDag","DAGBuilder","exports","_this","_defineProperty","evt","target","classList","contains","getAttribute","selectedElement","parentNode","broadcastListeners","preventDefault","coord","getMousePosition","setAttribute","concat","x","y","currNode","nodes","find","node","currEdgePos","position","cPatch","document","getElementById","newPathD","children","_mount","drag","bind","nodeEventListeners","svg","createElementNS","window","innerWidth","innerHeight","style","background","appendChild","_eventListeners","addEventListener","startDrag","endDrag","event","callback","_objectSpread","eventType","evtObj","nodeListener","CTM","getScreenCTM","clientX","e","a","clientY","f","d","createNode","_ref","newNode","Node","push","_render","map","child","_ref2","type","_ref3","nodeGroup","add","on","Circle","_Node","_inherits","_super","_createSuper","apply","arguments","Rect","_Node2","_super2","Ellipse","_Node3","_super3","container","width","height","offset","_SVGCanvas$getTransla","SVGCanvas","getTranslateValues","z","props","shape","_this2","render","remove","shapeId","filter","_this3","exportJSON","loadJSON","json","shapeProps","Shape","create","data","setAttributes","draggable","set","_len","length","args","Array","_key","_typeof","Object","keys","forEach","self","element","get","propKey","_this4","fill","color","stroke","getPosition","includes","_Shape","_this5","call","_wrap","group","_this$create","_Shape2","_this6","cx","cy","_this$create2","_Shape3","_this7","_this$create3","getComputedStyle","matrix","transform","webkitTransform","mozTransform","matrixType","matrixValues","match","split","_canvas","require","_lib","innerHTML","rect1","circle1","r","ellipse","rx","ry","colorToggle","pos","console","log","bundleURL","getBundleURLCached","getBundleURL","Error","err","matches","stack","getBaseURL","url","replace","bundle","updateLink","link","newLink","cloneNode","onload","href","Date","now","insertBefore","nextSibling","cssTimeout","reloadCSS","setTimeout","links","querySelectorAll","i","module"],"mappings":"AGAA,ACAA,IDAIqL,ACAAU,MAAM,GDAG,ACAAvB,GDAG,IAAI,ACAA,CAAC,cAAc,CAAC;ADCpC,ACCA,SDDSc,ACCAU,UAAUA,CAACC,IAAI,EAAE,CDDCX,CAAA,EAAG;ADD9B,ECEE,ACCA,EFHFf,ECEM,ACCA2B,CDDCb,IDFP,EEGa,CFHbb,ECEgB,ACCAyB,EDDE,ECCE,CAACE,AFHrB,SEG8B,CAAC,CAAC;AFFhC3B,EEGE0B,EDDEb,GDFJ,EEGS,CAACe,GDDG,GAAGb,ACCA,GAAG,SDDS,CAAC,CAAC,CCCC;AFF/B,ECEE,ECCEU,AFHJxB,IEGQ,AFHR,CEGS1D,EFHTyD,IEGe,CAAC,CAAC,CFHjB;AAEAlI,ECEE,ACAA,CAAC,KFFK,CCEC+I,ADFA9I,SCES,KDFK,CAAC,KAAK,CAAC,CAACmI,SAAS,mCACb;ACE3B,ECAEwB,OAAO,CAACG,IAAI,GAAGJ,IAAI,CAACI,IAAI,CAAC/B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,GAAGgC,IAAI,CAACC,GAAG,CAAC,CAAC;ADE3D,ADFA,EECEN,IAAI,CAAC3K,EDCEiK,QCDQ,CAACiB,GDCGjB,CAAA,EAAG,MCDM,CAACW,OAAO,EAAED,IAAI,CAACQ,WAAW,CAAC;AACzD,AFDA,ECEE;ACCF,AFFA,ECEE,ECAEC,EDAE,QCAQ,GAAG,IAAI;AACrB,AFFA,ICEI,KCAKC,CDAC,IAAInB,ICAImB,CDAC,ACAD,CDAA,CAAC,ACAE;AFDrB,ECEE,ACAA,CDAC,CAAC,ECAED,KDAKjB,GAAG,EAAE,ACAA,EAAE;AFDlB,ICEI,ACAA,IDAIC,OAAO,GAAG,CAAC,EAAE,GAAGD,GAAG,CAACE,KAAK,EAAEtB,KAAK,CAAC,+DAA+D,CAAC;ADDzG,EEEE,EDAE,IAAIqB,OAAO,EAAE;ADDjB,EEGEgB,IDDI,MCCM,CDDCd,ECCEgB,QDDQ,CAAClB,CCCC,CAAC,KDDK,CAAC,CAAC,CAAC,CAAC,GCCG;AFFtC,ICEI,ACCA,IAAImB,KAAK,GAAGvK,QAAQ,CAACwK,gBAAgB,CAAC,wBAAwB,CAAC;AFFnE,ECEE,ECCE,KAAK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AAE;AEyFb,MFxFI,ACsDIqG,IDtDA9D,CCsDK,CAACgE,CDtDH,GAAGxE,ECsDM,CAAC,IAAI,CDtDH,ACsDIqE,CDtDH5D,ICsDQ,CAACoD,SAAS,CDtDH,ACsDI,CDtDHnG,KAAK,EAAE,KAAK,CAAC;ICuDhD,EDtDA8C,GAAG,CAACnB,YAAY,CAAC,OAAO,EAAE3B,KAAK,CAAC;AE0FpC,EDpCK,IDrDD8C,GAAG,CAACnB,YAAY,CACd,SAAS,SAAAC,MAAA,CACFoB,MAAM,CAACC,UAAU,OAAArB,MAAA,CAAIoB,MAAM,CAACE,WAAW,CAChD,CAAC;AEuFL,IAAM1C,ADrCDJ,EDjDD0C,CCiDC,EDjDE,AEsFI,CFtFHnB,EEsFM,IAAI6E,MFtFE,CAAC,IAAI,GEsFE,CAAC/F,KFtFHmB,AEsFQ,CAAC,KFtFT,CAASrB,EAAE,CAAE,CAAC;EEuFlC4F,EDtCA9F,EDhDD,GCgDC,CDhDG,CAACyC,AEsFK,ADpCV,ECoCY,CFtFJ,GAAGA,GAAG,ACkDdiE,CCoCoB,MDpCbC,OAAO,EAAE;ECqCfZ,IFtFD9D,ACkDI,CCoCE,EAAEU,CDpCA,CAAC2D,GDlDD,CAACpE,AEsFK,CAACU,ADpCD,CAACR,QAAQ,CCoCE,EDpCC,CDlDH,CAAClC,EAAE,ACkDI,CDlDH,ACkDIoG,CDlDHxD,ICkDQ,CDlDH,ACkDIV,CDlDHW,OCkDW,CAAC6D,EDlDF,GAAG,CCkDK,CAAC,ODlDG;EEuFvDZ,IFtFD/D,EEsFO,ADrC8C,ECqC5CU,IFtFD,CAACT,ACiDkDqE,CCqC5C,CAAC1D,GDrCgD,CAAC3C,EAAE,KAAKyG,CDjDjD,CAACzG,EAAE,CAAC,CAAC8C,CCiDmD,UDjDxC,CAAC,IAAI,CAACP,GAAG,CAAC;AEuFrD,CAAC,CAAC,IFtFE,ACgD+E,EAAC,EDhD5E,CAACQ,eAAe,CAAC,CAAC;AEwF1B,IFvFE,AEuFIqH,ADvCF,KCuCO,GAAG,IAAInE,cAAS,CAACX,IAAI,CAAC;EFvF9B,AEwFEtF,ADxCA,ECwCE,EAAC,CAAC;EACJsB,CAAC,CFzFHzB,ACgDEA,CCyCG,EFzFL,ACgDE,CCyCM;EACN0B,CAAC,CF1FHzB,ACgDEA,CC0CG,GAAG,CF1FR,ACgDE,ED9CH,ACgDE,SDhDFiD,ACgDEZ,OAAA,EAAS,ODhDX,EAAkB;EEyFfiG,IFxFD,AEwFK,ADxCD,ECwCG,EFxFH,ACgDI7F,CDhDHA,EEwFO,ADxCD,CDhDH,CAACS,CCgDKjB,QAAQ,CAACS,MDhDE,CAAC,QCgDY,CAAC/C,EDhDF,EAAE,CCgDK,EAAE,CDhDH,CAACwD,GCgDO,CAAC,KDhDC,CAAC;EEyFrD4C,IFxFD,ACgDItD,CCwCE,EAAE,ADxCD,CDhDH,ACgDInB,CDhDHmB,CEwFM,EFxFH,CAACS,OCgDW,CAAC,OAAO,CDhDH,CAAC,ACgDIvD,KAAK,CAAC,KDhDC,EAAE,IAAI,CAAC2C,IAAI,CAAC;EEyFhD0D,IFxFD,ACgDIvD,ECwCG,CDxCA,CDhDH,AEwFK,ADxCDnB,CDhDHmB,CEwFM,EFxFH,CAACS,OCgDW,CACZ,QDjDiB,CAAC,ACiDT,SDjDkB,ACiDlB3B,EDjDoB,IAAI,ACiDxB,CDjDyB6B,ACkD3B,IAAI,CAACkD,EDlD6B,CAAC,ECkDzB,CAACP,KAAK,OAAAxE,MAAA,CAAI,IAAI,CAAC+E,KAAK,CAACN,MAAM,CAChD,CAAC;ECsCJsB,IFxFD,ACmDI7E,GAAG,CDnDH,ACmDInB,CDnDHmB,AEwFK,EAAE,CFxFJ,CAACS,OCmDW,CAAC,IAAI,IDnDA,CAAC,ICmDD3B,MAAA,CAAS,CDnDI,EAAE,CCmDF,CAAC+E,EDnDK,CAAClD,ECmDD,CAAC0C,IDnDO,CAAC,ICmDC,CAAE,CAAC;ACsC7D,CAAC,CAAC,EFxFA,ECmDMrD,GAAG,CAACnB,YAAY,CAAC,OAAO,EAAE,IAAI,CAACgF,KAAK,CAACP,KAAK,CAAC;ACuCnD,EF1FG,EE0FGwE,EDtCE9H,GAAG,CAACnB,CCsCC,GAAG,IAAI6E,IDtCI,CAAC,QAAQ,CCsCJ,CAAClB,ADtCK,IAAI,CAACqB,CCsCJ,CAAC,GDtCQ,CAACN,MAAM,CAAC;ECuChD9F,EF3FFH,AE2FI,EAAC,ADtCA,CDrDL,AE2FM,GDtCG,CAAC0C,GAAG,GAAGA,GAAG;ECuCjB0G,EF5FFnJ,AE4FI,EAAE,ADtCDiC,GDtDL,AE4FS,EF1FV,GCoDc,CAACC,KDpDfgB,SCoD6B,CAAC,IAAI,CAACoD,EDpDlBpG,EAAE,CCoDqB,CDpDnBmD,ACoDoByC,KDpDf,EAAExC,ECoDsB,CAAC,CAACN,IDpDhB,EAAE,KCoDyB,CAAC,IAAI,CAACP,GAAG,CAAC;ECuCtE2G,EAAE,EF1FH,AE0FK,ADtCDnH,GCsCI,CF1FJ,CAACO,GCoDO,CAACN,cDpDU,ACoDI,CDpDHhC,EAAE,CAAC,GAAAqD,CCoDAhC,MAAA,CAAQ,IAAI,CDpDZ,ACoDa+E,CDpDb/C,ICoDkB,CAACuC,QDpDnB,CCoD4B,CAAE,CAAC,CAAChD,CDnDrD,IAAI,ACmDsD,CDnDrDN,ACmDsDO,UAAU,GAAG,KDnDjD,CAAC7C,EAAE,CAAC,ACmDsD,IDnDlD,CAAC,CAAC,OAAAQ,eAAA,KACpC2C,KAAK,EAAGC,QAAQ,EAClB;EEwFAgF,EFvFH,ACiDE,ECsCK,EAAE,MAAM;EFvFd,AEwFEkC,ADvCA,CCuCC,EAAE,EAAE;EACLhC,EFzFFzI,ACiDEA,GDjDF,ACiDE,CCwCM,EAAE;AACb,CAAC,CAAC,EF1FCC,ACiDEA,KDjDF,ACiDE,ED/CH,ACiDE,SDjDFkB,ACiDEuF,OAAA,EAAS,UDjDQjD,SAAS,EAAEC,MAAM,EAAE;AE0FxC,IAAMgH,EFzFF,ACgDS,IDhDH/G,ACgDGmD,CCyCA,GAAG,EDzCH,ECyCOV,IFzFE,GAAG,IAAI,CAAC3D,EEyFD,CAACmD,OAAO,CAAC,OFzFU,CAC1ClC,MAAM,CAAC7C,MAAM,CAACG,YAAY,CAAC,IAAI,CAAC,CACjC;EEwFAb,EAAE,EFvFH,AEuFI,ADzCA,CD9CJwD,AEuFK,GDzCG,CAAC4C,KAAK,CAAClE,ED9CH,MC8CW,CAACqC,GAAG,CAAC,ED9C5Bf,QC8C6B6C,ID9CjB,CC8CsB,sBD9ClC7C,YAAY,CAAGF,SAAS,CAAC,MAAIE,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAGF,SAAS,CAAC,CAACC,MAAM,CAAC;EEwF7D0F,EFvFH,AEuFK,EAAE,ED1C6B,CC0C1B,MD1C+B5C,KAAK,CAACE,MAAM,CAACI,MAAI,CAACP,KAAK,CAACR,SAAS,CAAC;ED7C1E,AEwFEsD,EAAE,EAAE,AD3CoE,EAAC,CC2ClE;EACPd,EFzFFvI,AC8CC,EC2CK,CFzFN,CEyFQ,OAAO;EACb2K,AD5CA,ED9CF1K,AE0FI,EAAE,GF1FN,AE0FS,EFxEV,SAAAqB,iBAAiBV,GAAG,EAAE;EEyEnBgK,EAAE,AD7CF5K,ED3BD,AEwEK,CD7CJ,CC6CM,EFxEH4D,GAAG,GAAG,IAAI,CAAClB,GAAG,CAACmB,YAAY,CAAC,CAAC;EEyEhC4E,ED9CAxI,ED1BD,EEwEO,CD9CN,CC8CQ,CD5CT,ED5BO,OC4BP8G,WAAA,EAAa;AC6CjB,CAAC,CAAC,ID5CM,ED5BFtF,CAAC,EAAE,CAACb,CC4BK,ED5BF,CAACkD,CC4BK,CAACyC,KD5BC,AC4BI,CAAClE,ED5BFuB,GAAG,CAACG,CAAC,CC4BK,CAACW,ED5BFd,CC4BK,CAAC,CD5BH,CAACI,CAAC,OC4BEwC,KAAK,EAAK;AC8ClDpG,KAAK,CAAC4E,EFzEAtD,AC4BM,CD5BL,AEyEE,CAACgJ,CFzED,CAAC9J,GAAG,AC4BM4F,CD5BLvC,CEyEG,CAAC,ED7CM,CAACsC,ED5BJ,GAAG3C,AC4BM,GD5BH,CAACM,CAAC,IAAIN,GAAG,CAACO;AE0ErC/D,KAAK,CFzED,AEyEE4E,AD7CE,CD5BH,AC4BI,CAAC,CC6CD,CAACuF,KAAK,CAAC;AAChBnK,IFzEE,AC4BE,CC6CC,CAAC4E,GAAG,CAACwF,OAAO,CAAC;EFzEf,AC4BE;AC+CL,IF3EGxK,AC4BEA,GD5BF,AC4BE;ACgDLuK,IF5EGtK,AC4BEA,CCgDA,CAACsI,GF5EH,AC4BE,CCgDK,CF7BR,AE6BS,AD9CP,OC8Cc,CAAC,CF7BjBnE,AE6BkBqE,AD9ChBzB,MC8CsB,CAAC,ED9CdC,EDiBX5C,CE6B8B,CAAC,AD9ChB,EDiBf,ACjBiB,EDiBY;AE8B/BkG,KAAK,CF9B0B,AE8BzB7B,AD/Ce,IDiBNvI,EAAE,GAAAkE,EE8BA,CAAC,CF9BD,AE8BE,CF9BJlE,EAAE;AEgCjB,IAAI0K,ED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","file":"src.a2b27638.js","sourceRoot":"..","sourcesContent":["const svgns = \"http://www.w3.org/2000/svg\";\n\nclass DAG {\n  constructor() {}\n  createStage(id) {\n    this.stage = new Stage(id);\n    return this.stage;\n  }\n\n  getStage() {\n    return this.stage;\n  }\n\n  runDag() {}\n}\n\nexport const DAGBuilder = new DAG();\n\nclass Stage {\n  static that = this;\n  constructor(id) {\n    this.id = id;\n    this.children = [];\n    this._mount(id);\n    this.drag = this.drag.bind(this);\n    this.nodeEventListeners = {};\n  }\n\n  _mount(id) {\n    let svg = document.createElementNS(svgns, \"svg\");\n    svg.setAttribute(\"xmlns\", svgns);\n    svg.setAttribute(\n      \"viewBox\",\n      `0 0 ${window.innerWidth} ${window.innerHeight}`\n    );\n    svg.setAttribute(\"id\", `svg-${id}`);\n    this.svg = svg;\n    document.getElementById(id).style.background = \"#f2f2f2\";\n    document.getElementById(id).appendChild(this.svg);\n    this._eventListeners();\n  }\n\n  _eventListeners() {\n    this.svg.addEventListener(\"mousedown\", this.startDrag);\n    this.svg.addEventListener(\"mousemove\", this.drag);\n    this.svg.addEventListener(\"mouseup\", this.endDrag);\n    this.svg.addEventListener(\"mouseleave\", this.endDrag);\n  }\n\n  addEventListener(id, event, callback) {\n    this.nodeEventListeners[id] = {\n      ...(this.nodeEventListeners[id] || {}),\n      [event]: callback\n    };\n  }\n\n  broadcastListeners(eventType, evtObj) {\n    const nodeListener = this.nodeEventListeners[\n      evtObj.target.getAttribute(\"id\")\n    ];\n    nodeListener?.[eventType] && nodeListener?.[eventType](evtObj);\n  }\n\n  startDrag = (evt) => {\n    if (evt.target.classList.contains(\"draggable\")) {\n      switch (evt.target.getAttribute(\"type\")) {\n        case \"node\":\n          this.selectedElement = evt.target.parentNode;\n          this.broadcastListeners(\"dragStart\", evt);\n          break;\n        case \"edge\":\n          this.selectedElement = evt.target;\n          break;\n        default:\n          break;\n      }\n    }\n  };\n\n  getMousePosition(evt) {\n    var CTM = this.svg.getScreenCTM();\n    return {\n      x: (evt.clientX - CTM.e) / CTM.a,\n      y: (evt.clientY - CTM.f) / CTM.d\n    };\n  }\n\n  drag = (evt) => {\n    if (this.selectedElement) {\n      evt.preventDefault();\n      var coord = this.getMousePosition(evt);\n\n      switch (this.selectedElement.getAttribute(\"type\")) {\n        case \"node\":\n          this.selectedElement.setAttribute(\n            \"transform\",\n            `translate(${coord.x - 50}, ${coord.y - 25})`\n          );\n          this.broadcastListeners(\"dragMove\", evt);\n          break;\n        case \"edge\":\n          const currNode = this.nodes.find(\n            (node) =>\n              node.id === this.selectedElement.parentNode.getAttribute(\"nodeId\")\n          );\n          const currEdgePos = {\n            x: currNode.position.x + 100,\n            y: currNode.position.y + 25\n          };\n          let cPatch = document.getElementById(\"cPath\");\n          let newPathD = `M ${currEdgePos.x} ${currEdgePos.y} T ${coord.x} ${coord.y}`;\n          cPatch.setAttribute(\"d\", newPathD);\n          break;\n        default:\n          break;\n      }\n    }\n  };\n\n  endDrag = (evt) => {\n    if (evt.target.classList.contains(\"draggable\")) {\n      switch (evt.target.getAttribute(\"type\")) {\n        case \"node\":\n          this.selectedElement = null;\n          this.broadcastListeners(\"dragEnd\", evt);\n          break;\n        default:\n          break;\n      }\n    }\n  };\n\n  createNode({ id, position }) {\n    let newNode = new Node({ id, position });\n    this.children.push(newNode);\n    return newNode;\n  }\n\n  _render() {\n    this.children.map((child) => child._render());\n  }\n}\n\nclass Node {\n  constructor({ id, position }) {\n    this.id = id;\n    this.position = position;\n    this.type = \"node\";\n    this._mount({ id, position });\n  }\n\n  _mount({ id, position }) {\n    let node = document.createElementNS(svgns, \"rect\");\n    let nodeGroup = document.createElementNS(svgns, \"g\");\n    node.setAttribute(\"x\", 0);\n    node.setAttribute(\"y\", 0);\n    node.setAttribute(\"width\", \"100\");\n    node.setAttribute(\"height\", \"50\");\n    node.setAttribute(\"fill\", \"red\");\n    node.setAttribute(\"stroke\", \"red\");\n    node.setAttribute(\"id\", id);\n    node.setAttribute(\"type\", \"node\");\n    node.classList.add(\"draggable\");\n    nodeGroup.setAttribute(\"type\", \"node\");\n    nodeGroup.setAttribute(\"id\", `${this.id}-container`);\n    nodeGroup.setAttribute(\n      \"transform\",\n      `translate(${position.x}, ${position.y})`\n    );\n    nodeGroup.appendChild(node);\n    document.getElementById(\"svg-canvas\").appendChild(nodeGroup);\n  }\n\n  _render() {\n    const nodeGroup = document.getElementById(`#${this.id}-container`);\n    const node = document.getElementById(`#${this.id}`);\n    nodeGroup.setAttribute(\n      \"transform\",\n      `translate(${this.position.x}, ${this.position.y})`\n    );\n\n    node.setAttribute(\"fill\", \"blue\");\n    node.setAttribute(\"stroke\", \"red\");\n  }\n\n  on(event, callback) {\n    DAGBuilder.stage.addEventListener(this.id, event, callback);\n    return this;\n  }\n}\n\n\nclass Circle extends Node {\n\n}\n\nclass Rect extends Node {\n  \n}\n\nclass Ellipse extends Node {\n  \n}","const svgns = \"http://www.w3.org/2000/svg\";\n\n//patterns covered\n\n// constructor pattern - create shape\n// abstract constructor pattern - inside loadJSON\n// facade pattern - loadJSON\n// observer - events - click,drag\n// builder pattern - index js \n// adapter pattern - set function\n\n\nclass Stage {\n    constructor({ container, width, height }) {\n        this.props = { container, width, height };\n        this.props.children = [];\n        this.nodeEventListeners = {};\n        this._mount();\n        this._eventListeners();\n    }\n\n    _eventListeners() {\n        document.getElementById(this.props.container).addEventListener(\"mousedown\", this.startDrag);\n        document.getElementById(this.props.container).addEventListener(\"mousemove\", this.drag);\n        document.getElementById(this.props.container).addEventListener(\"mouseup\", this.endDrag);\n        document.getElementById(this.props.container).addEventListener(\"mouseleave\", this.endDrag);\n    }\n\n    addEventListener(id, event, callback) {\n        this.nodeEventListeners[id] = {\n            ...(this.nodeEventListeners[id] || {}),\n            [event]: callback\n        };\n    }\n\n    broadcastListeners(eventType, evtObj) {\n        const nodeListener = this.nodeEventListeners[\n            evtObj.target.getAttribute(\"id\")\n        ];\n        nodeListener?.[eventType] && nodeListener?.[eventType](evtObj);\n    }\n\n    startDrag = (evt) => {\n        if (evt.target.classList.contains(\"draggable\")) {\n            this.selectedElement = evt.target.parentNode;\n            this.offset = this.getMousePosition(evt);\n            const { x, y, z } = SVGCanvas.getTranslateValues(this.selectedElement)\n            this.offset.x -= x\n            this.offset.y -= y\n            this.broadcastListeners(\"dragStart\", evt);\n        }\n    };\n\n    getMousePosition(evt) {\n        var CTM = this.svg.getScreenCTM();\n        return {\n            x: (evt.clientX - CTM.e) / CTM.a,\n            y: (evt.clientY - CTM.f) / CTM.d\n        };\n    }\n\n    drag = (evt) => {\n        if (this.selectedElement) {\n            evt.preventDefault();\n            var coord = this.getMousePosition(evt);\n            this.selectedElement.setAttribute(\n                \"transform\",\n                `translate(${coord.x - this.offset.x}, ${coord.y - this.offset.y})`\n            );\n            this.broadcastListeners(\"dragMove\", evt);\n        }\n    };\n\n    endDrag = (evt) => {\n        if (evt.target.classList.contains(\"draggable\")) {\n            this.selectedElement = null;\n            this.broadcastListeners(\"dragEnd\", evt);\n        }\n    };\n\n    add(shape) {\n        this.props.children.push(shape);\n        shape.getStage = () => this;\n        shape.render(this.props.container);\n    }\n\n    remove(shapeId) {\n        this.props.children = this.props.children.filter(() => shape.id !== shapeId);\n    }\n\n    _mount() {\n        let svg = document.createElementNS(svgns, \"svg\");\n        svg.setAttribute(\"xmlns\", svgns);\n        svg.setAttribute(\n            \"viewBox\",\n            `0 0 ${this.props.width} ${this.props.height}`\n        );\n        svg.setAttribute(\"id\", `svg-${this.props.container}`);\n        svg.setAttribute(\"width\", this.props.width);\n        svg.setAttribute(\"height\", this.props.height);\n        this.svg = svg;\n        document.getElementById(this.props.container).appendChild(this.svg);\n        document.getElementById(`svg-${this.props.container}`).style.background = \"#f2f2f2\";\n    }\n\n    render() {\n        this.props.children.map((shape) => shape.render(this.props.container))\n    }\n\n    exportJSON() {\n        return this.props.children.map((shape) => {\n            return shape.props\n        })\n    }\n\n    loadJSON(json) { // facade\n        this.props.children = json.map((shapeProps) => {\n\n            // abstract constructor pattern\n            switch (shapeProps.type) {\n                case 'Rect':\n                    return new Rect({ ...shapeProps })\n                case 'Circle':\n                    return new Circle({ ...shapeProps })\n                case 'Ellipse':\n                    return new Ellipse({ ...shapeProps })\n                default:\n                    break;\n            }\n        })\n\n        this.render();\n    }\n}\n\nclass Shape {\n    constructor(props) {\n        this.props = { ...props };\n    }\n\n    create() {\n        let shape = document.createElementNS(svgns, this.data.shape);\n\n        this.setAttributes(shape);\n\n        if (this.props.draggable) shape.classList.add(\"draggable\");\n        return { shape }\n    }\n\n    set(...args) { // adapter pattern\n        const shape = document.getElementById(this.props.id);\n\n        if (typeof args[0] === \"string\") {\n            shape.setAttribute(args[0], args[1]);\n        }\n        if (typeof args[0] === \"object\") {\n            Object.keys(args[0]).forEach((key) => {\n                self.element.style[key] = args[0][key];\n                shape.setAttribute(key, args[0][key]);\n            });\n        }\n    }\n\n    get(propKey) {\n        return this.props[propKey];\n    }\n\n    setAttributes(shape) {\n        Object.keys(this.props).forEach((key) => {\n            shape.setAttribute(key, this.props[key]);\n        });\n    }\n\n    fill(color) {\n        document.getElementById(this.props.id).setAttribute('fill', color);\n        return this;\n    }\n\n    stroke(color) {\n        document.getElementById(this.props.id).setAttribute('stroke', color);\n        return this;\n    }\n\n    getPosition() {\n        return { x: this.props.x, y: this.props.y }\n    }\n\n\n    on(event, callback) {\n        if (['dragStart', 'dragMove', 'dragEnd'].includes(event)) {\n            this.getStage().addEventListener(this.props.id, event, callback);\n        } else {\n            document.getElementById(this.props.id).addEventListener(event, callback);\n        }\n    }\n\n}\nclass Rect extends Shape {\n    constructor(props) {\n        super(props);\n        this.props = { ...props };\n        this.data = { shape: 'rect' };\n    }\n\n    _wrap(shape) {\n        let group = document.createElementNS(svgns, \"g\");\n        group.setAttribute(\"id\", `${this.props.id}-container`);\n        group.setAttribute(\n            \"transform\",\n            `translate(${this.props.x - this.props.width / 2}, ${this.props.y - this.props.height / 2})`\n        );\n        group.appendChild(shape);\n        return group;\n    }\n\n    render(container) {\n        const { shape } = this.create();\n        shape.setAttribute(\"x\", 0);\n        shape.setAttribute(\"y\", 0);\n        const group = this._wrap(shape);\n        document.getElementById(`svg-${container}`).appendChild(group);\n    }\n}\nclass Circle extends Shape {\n    constructor(props) {\n        super(props);\n        this.props = { ...props };\n        this.data = { shape: 'circle' };\n    }\n\n    _wrap(shape) {\n        let group = document.createElementNS(svgns, \"g\");\n        group.setAttribute(\"id\", `${this.props.id}-container`);\n        group.setAttribute(\n            \"transform\",\n            `translate(${this.props.cx}, ${this.props.cy})`\n        );\n        group.appendChild(shape);\n        return group;\n    }\n\n    render(container) {\n        const { shape } = this.create();\n        shape.setAttribute(\"cx\", 0);\n        shape.setAttribute(\"cy\", 0);\n        const group = this._wrap(shape);\n        document.getElementById(`svg-${container}`).appendChild(group);\n    }\n}\nclass Ellipse extends Shape {\n    constructor(props) {\n        super(props);\n        this.props = { ...props };\n        this.data = { shape: 'ellipse' };\n    }\n\n    _wrap(shape) {\n        let group = document.createElementNS(svgns, \"g\");\n        group.setAttribute(\"id\", `${this.props.id}-container`);\n        group.setAttribute(\n            \"transform\",\n            `translate(${this.props.cx}, ${this.props.cy})`\n        );\n        group.appendChild(shape);\n        return group;\n    }\n\n    render(container) {\n        const { shape } = this.create();\n        shape.setAttribute(\"cx\", 0);\n        shape.setAttribute(\"cy\", 0);\n        const group = this._wrap(shape);\n        document.getElementById(`svg-${container}`).appendChild(group);\n    }\n}\n\nexport const SVGCanvas = (function () {\n\n    return {\n        Stage,\n        Rect,\n        Circle,\n        Ellipse,\n        getTranslateValues: function (element) {\n            const style = window.getComputedStyle(element)\n            const matrix = style.transform || style.webkitTransform || style.mozTransform\n\n            // No transform property. Simply return 0 values.\n            if (matrix === 'none') {\n                return {\n                    x: 0,\n                    y: 0,\n                    z: 0\n                }\n            }\n\n            // Can either be 2d or 3d transform\n            const matrixType = matrix.includes('3d') ? '3d' : '2d'\n            const matrixValues = matrix.match(/matrix.*\\((.+)\\)/)[1].split(', ')\n\n            // 2d matrices have 6 values\n            // Last 2 values are X and Y.\n            // 2d matrices does not have Z value.\n            if (matrixType === '2d') {\n                return {\n                    x: matrixValues[4],\n                    y: matrixValues[5],\n                    z: 0\n                }\n            }\n\n            // 3d matrices have 16 values\n            // The 13th, 14th, and 15th values are X, Y, and Z\n            if (matrixType === '3d') {\n                return {\n                    x: matrixValues[12],\n                    y: matrixValues[13],\n                    z: matrixValues[14]\n                }\n            }\n        }\n    }\n}());\n","import { DAGBuilder } from \"./canvas\";\nimport \"./index.css\";\nimport { SVGCanvas } from \"./lib\";\n\ndocument.getElementById(\"app\").innerHTML = `\n   <div id=\"canvas\"></div>`;\n\n// const stage = DAGBuilder.createStage(\"canvas\");\n// stage\n//   .createNode({ id: 1, position: { x: 100, y: 100 } })\n//   .on(\"dragStart\", (event) => {\n//     console.log(\"Start\");\n//   })\n//   .on(\"dragMove\", (event) => {\n//     console.log(\"Move\");\n//   })\n//   .on(\"dragEnd\", (event) => {\n//     console.log(stage);\n//   });\n\n// stage\n//   .createNode({ id: 2, position: { x: 200, y: 200 } })\n//   .on(\"dragStart\", (event) => {\n//     console.log(\"Start\");\n//   })\n//   .on(\"dragMove\", (event) => {\n//     console.log(\"Move\");\n//   })\n//   .on(\"dragEnd\", (event) => {\n//     console.log(\"End\");\n//   });\n\n// dagster.createStage(\"canvas\");\n// dagster.createNode({ id: 123, position: { x: 0, y: 0 } });\n\n// console.log(dagster);s\n// object literal like jquery\n// const DAGManager = function () {\n//   return {\n//     nodes: [],\n//     edges: [],\n//     nodeTypes: [\"data\", \"select\", \"filter\", \"ML\"],\n//     createNode: function (nodeData) {\n//       const newNode = NodeFactory.createNode(nodeData); // fatcory pattern\n//       this.nodes.push(newNode);\n//       return newNode;\n//     },\n//     initStage: function (stageId) {\n//       return new Stage(stageId);\n//     }\n//   };\n// };\n\n// const DAG = new DAGManager();\n\n// const StageInstance = DAG.initStage(\"stage\");\n\n// DAG.createNode({\n//   id: \"123\",\n//   position: { x: 100, y: 100 },\n//   type: \"select\"\n// });\n\n// DAG.createNode({\n//   id: \"2\",\n//   position: { x: 200, y: 200 },\n//   type: \"select\"\n// });\n\n// console.log(DAG);\n\n\n// const stage = new Stage(canvasId); // constructor creational pattern\n// const node_1 = new Rect({ id, position , draggable});\n// const node_2 = new Circle();\n\n// node_1.prototype.common = ()=> console.log(\"common fn\");\n\n// console.log(node_2.common());\n\n// stage.add(node_1);\n\n// node_1.on('click',(evt)=>{\n//    console.log(\"clicked\");\n// });\n\n// stage._render();\n\n\n\n// patterns for demo \n\n// singleton pattern - new Stage must be a singleton - atleast for the example \n// oberserver pattern \n// adapter pattern \n// builder pattern \n// factory pattern - shape factory for nodes \n// proxy - pattern for setting and getting values\n// facade pattern - _render, loadJSON to stage method - since it has a complex logic to it \n\n\n// part 1\n// lib plan\n// stage containr \n// layer\n// nodes - rect Circle Ellipse\n// styling \n// events .on() - observer pattern\n// dragNdrop - shape.draggable('true'); setting prop\n// Selectors - find method \n// export and import - createStage({}) using json - load json can be **facade**\n// hover effect on a node \n// set, get node props - **proxy pattern**\n// render method is **facade**\n\n\n// part - 2\n// JSX parser\n\n\n// constructor pattern\nconst stage = new SVGCanvas.Stage({\n     container: \"canvas\",\n     width: window.innerWidth,\n     height: window.innerHeight\n});\n\nconst rect1 = new SVGCanvas.Rect({\n     id:1,\n     x: 300,\n     y: 100,\n     fill: 'red',\n     width: 100,\n     height: 50,\n     draggable: true\n});\n\nconst circle1 = new SVGCanvas.Circle({\n     id:2,\n     cx: 100,\n     cy: 100,\n     fill: 'blue',\n     r: 40,\n     stroke: 'black',\n});\n\nconst ellipse = new SVGCanvas.Ellipse({\n     id:3,\n     cx: 100,\n     cy: 100,\n     fill: 'white',\n     rx: 100,\n     ry: 60,\n     stroke: 'black',\n});\n\nstage.add(ellipse);\nstage.add(rect1);\nstage.add(circle1);\n\n// builder pattern\nrect1.fill('black').stroke('red');\nrect1.getPosition();\n\nvar colorToggle = false;\nrect1.on('click',(e)=>{\n   e.target.setAttribute('fill',colorToggle ? 'red' : 'blue');\n   colorToggle = !colorToggle;\n});\n// observer pattern\nrect1.on('dragMove',(e)=>{\n     const pos = SVGCanvas.getTranslateValues(e.target.parentNode);\n     document.getElementById(\"data\").innerHTML = `X: ${pos.x}, Y: ${pos.y} `;\n});\n\nconsole.log(stage.exportJSON());\n","var bundleURL = null;\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  // Attempt to find the URL of the current script and use that as the base URL\n  try {\n    throw new Error;\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\\/\\/.+)?\\/[^/]+(?:\\?.*)?$/, '$1') + '/';\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\n","var bundle = require('./bundle-url');\n\nfunction updateLink(link) {\n  var newLink = link.cloneNode();\n  newLink.onload = function () {\n    link.remove();\n  };\n  newLink.href = link.href.split('?')[0] + '?' + Date.now();\n  link.parentNode.insertBefore(newLink, link.nextSibling);\n}\n\nvar cssTimeout = null;\nfunction reloadCSS() {\n  if (cssTimeout) {\n    return;\n  }\n\n  cssTimeout = setTimeout(function () {\n    var links = document.querySelectorAll('link[rel=\"stylesheet\"]');\n    for (var i = 0; i < links.length; i++) {\n      if (bundle.getBaseURL(links[i].href) === bundle.getBundleURL()) {\n        updateLink(links[i]);\n      }\n    }\n\n    cssTimeout = null;\n  }, 50);\n}\n\nmodule.exports = reloadCSS;\n"]}